package com.jfshare.test;

import org.apache.thrift.protocol.TBinaryProtocol;
import org.apache.thrift.protocol.TProtocol;
import org.apache.thrift.transport.TFramedTransport;
import org.apache.thrift.transport.TSocket;
import org.apache.thrift.transport.TTransport;

import com.jfshare.finagle.thrift.address.AddressInfoListResult;
import com.jfshare.finagle.thrift.address.AddressServ;

public class Test1 implements Runnable {
	
	private String threadName;
	public static void main(String[] args) {
		Test1 test1 = new Test1("test1");
		Thread t1 = new Thread(test1);
		
		Test1 test2 = new Test1("test2");
		Thread t2 = new Thread(test2);
		
		Test1 test3 = new Test1("test3");
		Thread t3 = new Thread(test3);
		
		Test1 test4 = new Test1("test4");
		Thread t4= new Thread(test4);
		
		Test1 test5 = new Test1("test5");
		Thread t5 = new Thread(test5);
		
		Test1 test6 = new Test1("test6");
		Thread t6 = new Thread(test6);
		
		Test1 test7 = new Test1("test7");
		Thread t7 = new Thread(test7);
		
		Test1 test8 = new Test1("test8");
		Thread t8 = new Thread(test8);
		
		Test1 test9 = new Test1("test9");
		Thread t9 = new Thread(test9);
		
		Test1 test10 = new Test1("test10");
		Thread t10 = new Thread(test10);

		Test1 test11 = new Test1("test11");
		Thread t11 = new Thread(test11);
		
		Test1 test12 = new Test1("test12");
		Thread t12 = new Thread(test12);
		
		Test1 test13 = new Test1("test13");
		Thread t13 = new Thread(test13);
		
		Test1 test14 = new Test1("test14");
		Thread t14= new Thread(test14);
		
		Test1 test15 = new Test1("test15");
		Thread t15 = new Thread(test15);
		
		Test1 test16 = new Test1("test16");
		Thread t16 = new Thread(test16);
		
		Test1 test17 = new Test1("test17");
		Thread t17 = new Thread(test17);
		
		Test1 test18 = new Test1("test18");
		Thread t18 = new Thread(test18);
		
		Test1 test19 = new Test1("test19");
		Thread t19 = new Thread(test19);
		
		Test1 test20 = new Test1("test20");
		Thread t20 = new Thread(test20);
		
		Test1 test21 = new Test1("test21");
		Thread t21 = new Thread(test21);
		
		Test1 test22 = new Test1("test22");
		Thread t22 = new Thread(test22);
		
		Test1 test23 = new Test1("test23");
		Thread t23 = new Thread(test23);
		
		Test1 test24 = new Test1("test24");
		Thread t24= new Thread(test24);
		
		Test1 test25 = new Test1("test25");
		Thread t25 = new Thread(test25);
		
		Test1 test26 = new Test1("test26");
		Thread t26 = new Thread(test26);
		
		Test1 test27 = new Test1("test27");
		Thread t27 = new Thread(test27);
		
		Test1 test28 = new Test1("test28");
		Thread t28 = new Thread(test28);
		
		Test1 test29 = new Test1("test29");
		Thread t29 = new Thread(test29);
		
		Test1 test30 = new Test1("test30");
		Thread t30 = new Thread(test30);
		
		Test1 test31 = new Test1("test31");
		Thread t31 = new Thread(test31);
		
		Test1 test32 = new Test1("test32");
		Thread t32 = new Thread(test32);
		
		Test1 test33 = new Test1("test33");
		Thread t33 = new Thread(test33);
		
		Test1 test34 = new Test1("test34");
		Thread t34= new Thread(test34);
		
		Test1 test35 = new Test1("test35");
		Thread t35 = new Thread(test35);
		
		Test1 test36 = new Test1("test36");
		Thread t36 = new Thread(test36);
		
		Test1 test37 = new Test1("test37");
		Thread t37 = new Thread(test37);
		
		Test1 test38 = new Test1("test38");
		Thread t38 = new Thread(test38);
		
		Test1 test39 = new Test1("test39");
		Thread t39 = new Thread(test39);
		
		Test1 test40 = new Test1("test40");
		Thread t40 = new Thread(test40);		

		Test1 test41 = new Test1("test41");
		Thread t41 = new Thread(test41);
		
		Test1 test42 = new Test1("test42");
		Thread t42 = new Thread(test42);
		
		Test1 test43 = new Test1("test43");
		Thread t43 = new Thread(test43);
		
		Test1 test44 = new Test1("test44");
		Thread t44= new Thread(test44);
		
		Test1 test45 = new Test1("test45");
		Thread t45 = new Thread(test45);
		
		Test1 test46 = new Test1("test46");
		Thread t46 = new Thread(test46);
		
		Test1 test47 = new Test1("test47");
		Thread t47 = new Thread(test47);
		
		Test1 test48 = new Test1("test48");
		Thread t48 = new Thread(test48);
		
		Test1 test49 = new Test1("test49");
		Thread t49 = new Thread(test49);
		
		Test1 test50 = new Test1("test50");
		Thread t50 = new Thread(test50);
		
		t1.start();
		t2.start();
		t3.start();
		t4.start();
		t5.start();
		t6.start();
		t7.start();
		t8.start();
		t9.start();		
		t10.start();
		
		t11.start();
		t12.start();
		t13.start();
		t14.start();
		t15.start();
		t16.start();
		t17.start();
		t18.start();
		t19.start();
		t20.start();

		t21.start();
		t22.start();
		t23.start();
		t24.start();
		t25.start();
		t26.start();
		t27.start();
		t28.start();
		t29.start();		
		t30.start();
		
		t31.start();
		t32.start();
		t33.start();
		t34.start();
		t35.start();
		t36.start();
		t37.start();
		t38.start();
		t39.start();		
		t40.start();
		
		t41.start();
		t42.start();
		t43.start();
		t44.start();
		t45.start();
		t46.start();
		t47.start();
		t48.start();
		t49.start();		
		t50.start();
		
		
	}
	public Test1(String name){
		threadName=name;
	}

	@Override
	public void run() {
		try {
			TTransport transport;
			if (true) {
				transport = new TSocket("192.168.10.57", 12308);
				// transport = new TSocket("localhost", 12308);
				transport.open();
			}

			TProtocol protocol = new TBinaryProtocol(new TFramedTransport(transport));
			AddressServ.Client client = new AddressServ.Client(protocol);
			// ProductDetailServ.Client client = new
			// ProductDetailServ.Client(protocol);

			int count = 100;
			for (int i = 0; i < count; i++) {
				long start = System.currentTimeMillis();
				AddressInfoListResult result = client.queryAddress(361125);
//				System.out.println(""+result);
				long end = System.currentTimeMillis();
				if (end - start > 1000) {
					System.out.println("线程："+threadName+",第"+i+"个调用用时"+(end - start)+"！！！超时！！超时！！");
				} else {
					System.out.println("线程："+threadName+",第"+i+"个调用用时"+(end - start)+"***********");
				}
			}

		} catch (Exception e) {
			e.printStackTrace();
		}
		
	}
}
